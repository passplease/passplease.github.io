---
title: ä½¿ç”¨Dockerå®¹å™¨æµ‹è¯•C++ä»£ç 
author: me
date: 2025-08-10 10:31:09 +0800
description: ä½¿ç”¨Dockerå®¹å™¨é…ç½®Clionèƒ½ç”¨çš„MSVC Toolchainï¼Œå¹¶è°ƒè¯•C++ä»£ç 
categories: [è®¡ç®—æœº,C++]
tags: [è®¡ç®—æœº,C++,Docker,Clion]
---
å› ä¸ºæœ€è¿‘å…³äº[æˆ‘çš„ä¸€ä¸ªé¡¹ç›®](../Bç«™è§†é¢‘æ¨èç¨‹åºä¿¡æ¯/)æœ‰æ¶æ„å˜åŠ¨çš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ç¬¬ä¸€æ¬¡åœ¨ç”µè„‘ä¸Šå®‰è£…Dockerï¼Œè€ƒè™‘åˆ°æœ€åæˆ‘çš„ä»£ç ä¹Ÿè¦åœ¨Dockerç¯å¢ƒä¸­æµ‹è¯•ï¼Œæ‰€ä»¥æˆ‘æƒ³ï¼Œç´¢æ€§å¹³å¸¸å°±ç›´æ¥åœ¨Dockerç¯å¢ƒä¸­æµ‹è¯•ï¼Œå°†Dockeré…ç½®åˆ°CLionçš„Toolchainä¸­ï¼Œä¸ä»…æ–¹ä¾¿æµ‹è¯•ï¼Œè€Œä¸”é€‚åˆä»£ç å®é™…è¿è¡Œç¯å¢ƒã€‚ä¸‹é¢å°±æ˜¯é…ç½®çš„æµç¨‹ä»¥åŠé‡åˆ°çš„ä¸€äº›é—®é¢˜å’Œè§£å†³æ–¹æ³•ã€‚ï¼ˆå…¨ç¨‹éƒ½åœ¨Gemini-2.5-proè¾…åŠ©ä¸‹å®Œæˆï¼‰
>åè®°ï¼šæœ€åˆæˆ‘çš„æƒ³æ³•ç¡®å®å¦‚å‰é¢æ‰€è¯´çš„é‚£æ ·ï¼Œå¯æ˜¯å½“æˆ‘èŠ±äº†ä¸¤å¤©æ—¶é—´çœŸçš„æ¥æä¹‹åï¼Œæˆ‘å‘ç°ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªéš¾ä»¥è·¨è¶Šçš„éšœç¢â€”â€”ä¸è®ºæ˜¯CLionã€Visual Studioè¿˜æ˜¯VS Codeï¼Œå®ƒä»¬éƒ½ä¸æ”¯æŒWindowsæ¶æ„çš„Dockerå®¹å™¨ä½œç¼–è¯‘ç¯å¢ƒï¼Œä¹Ÿä¸æ”¯æŒè¿œç¨‹æ˜¯Windowsçš„è¿œç¨‹å¼€å‘ï¼Œç”šè‡³è¿˜ä¸æ”¯æŒå°†Windowsç³»ç»Ÿçš„Dockerå®¹å™¨ä½œä¸ºå¼€å‘å®¹å™¨ã€‚ï¼ˆå®˜æ–¹æ–‡æ¡£å‚è€ƒä»–ä»¬æ”¯æŒçš„æ“ä½œç³»ç»Ÿå°±çŸ¥é“äº†[^clionsupport]ï¼‰ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰è¿™äº›IDEéƒ½æ²¡æœ‰æä¾›æ”¯æŒï¼Œç”šè‡³å¾®è½¯è‡ªå·±çš„IDEéƒ½æ²¡æœ‰æä¾›æ”¯æŒğŸ˜¡ï¼Œæ·±åº¦é›†æˆçš„æœŸæœ›ç®—æ˜¯å¤±è´¥äº†ã€‚ä¸è¿‡å·²ç»å†™äº†å¾ˆå¤šç¬”è®°çš„æˆ‘è§‰å¾—ï¼Œå¦‚æœåˆ å»è¿™æ®µç»å†ï¼Œä¸ä»…æµªè´¹äº†æˆ‘å‰é¢çš„å¿ƒè¡€ï¼Œè€Œä¸”å¦‚æœæˆ‘ä¸‹æ¬¡è¿˜é‡ä¸Šè¿™ç§æƒ…å†µï¼Œæˆ‘ä¹Ÿå¯ä»¥æ¥å€Ÿé‰´ä¸€ä¸‹è¿™æ¬¡çš„ç»éªŒï¼Œæ‰€ä»¥æˆ‘æ²¡æœ‰åˆ å»è¿™éƒ¨åˆ†ï¼Œä»ç„¶ä¿ç•™åœ¨æ–‡ç« ä¸­ã€‚å†µä¸”ï¼Œå¦‚æœæˆ‘ä»¬é€€è€Œæ±‚å…¶æ¬¡ï¼Œåœ¨å®¹å™¨ä¸­æµ‹è¯•ä»£ç ä»ç„¶æ˜¯å¯ä»¥çš„ï¼Œå…³äºè¿™éƒ¨åˆ†ï¼Œæˆ‘åœ¨[åé¢](#åœ¨dockerä¸­ç¼–è¯‘å’Œæµ‹è¯•ä»£ç )ä¹Ÿæœ‰è¯´åˆ°ã€‚
{: .prompt-danger }
## åŸç†
é¦–å…ˆï¼Œæˆªæ­¢æ–‡ç« å®Œæˆä¹‹æ—¥ï¼ŒCLionå¹¶æ²¡æœ‰æ”¯æŒä½¿ç”¨Windowsçš„Dockerå®¹å™¨åšæµ‹è¯•ç”¨Toolchainï¼Œä»…ä»…æ”¯æŒLinuxæ¶æ„çš„Dockerå®¹å™¨ç”¨äºToolchain[^clionsupport]ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½é‡‡ç”¨Remote Toolchainçš„æ–¹å¼è¾¾æˆæˆ‘ä»¬çš„ç›®çš„ï¼Œä¸è¿‡åå¤„å°±æ˜¯æˆ‘ä»¬å¿…é¡»è¦æå‰å¼€å¯ä¸€ä¸ªå®¹å™¨ï¼Œè¿™ä¸ªå®¹å™¨è¦å¸¦æœ‰å¯¹åº”ç¼–è¾‘å™¨ç­‰ç­‰çš„å·¥å…·ï¼Œè¿˜è¦æœ‰OpenSSHç”¨æ¥å»ºç«‹è¿æ¥ï¼Œä¸‹é¢æˆ‘ä»¬å°±ä¸€æ­¥æ­¥åœ°æ¥æ­å»ºã€‚
## åˆ›å»ºå¸¦MSVCçš„Windowsç¯å¢ƒçš„é•œåƒ
é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…MSVCï¼Œè‡³äºæ€ä¹ˆå®‰è£…ï¼Œå¾®è½¯å®˜æ–¹å·²ç»ç»™å‡ºäº†é…ç½®æ–¹å¼[^msvc]ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨Dockerfileé‡Œå†™å¦‚ä¸‹å†…å®¹ï¼Œç„¶åæ„å»ºå³å¯ã€‚
```dockerfile
# escape=`

# Use the latest Windows Server Core 2022 image.
FROM mcr.microsoft.com/windows/servercore:ltsc2022

# Restore the default Windows shell for correct batch processing.
SHELL ["cmd", "/S", "/C"]

RUN `
    # Download the Build Tools bootstrapper.
    curl -SL --output vs_buildtools.exe https://aka.ms/vs/17/release/vs_buildtools.exe `
    `
    # Install Build Tools with the Microsoft.VisualStudio.Workload.AzureBuildTools workload, excluding workloads and components with known issues.
    && (start /w vs_buildtools.exe --quiet --wait --norestart --nocache `
        --installPath "%ProgramFiles(x86)%\Microsoft Visual Studio\2022\BuildTools" `
        --add Microsoft.VisualStudio.Workload.AzureBuildTools `
        --remove Microsoft.VisualStudio.Component.Windows10SDK.10240 `
        --remove Microsoft.VisualStudio.Component.Windows10SDK.10586 `
        --remove Microsoft.VisualStudio.Component.Windows10SDK.14393 `
        --remove Microsoft.VisualStudio.Component.Windows81SDK `
        || IF "%ERRORLEVEL%"=="3010" EXIT 0) `
    `
    # Cleanup
    && del /q vs_buildtools.exe

# Define the entry point for the docker container.
# This entry point starts the developer command prompt and launches the PowerShell shell.
ENTRYPOINT ["C:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\\Common7\\Tools\\VsDevCmd.bat", "&&", "powershell.exe", "-NoLogo", "-ExecutionPolicy", "Bypass"]
```
ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼ˆä¾‹ï¼‰æ„å»ºï¼š
```bash
docker build -t msvc .
```
è¿™æ ·å°±æœ‰äº†ä¸€ä¸ªå¸¦MSVCçš„ï¼Œä½¿ç”¨Windowsç¯å¢ƒçš„Dockerå®¹å™¨ã€‚<br><br>
å½“ç„¶ï¼Œè¿™é‡Œä¸é‡åˆ°é—®é¢˜æ˜¯ä¸å¯èƒ½çš„ï¼Œæˆ‘ç¬¬ä¸€æ¬¡è¿è¡ŒæŠ¥é”™
```shell
ERROR: failed to build: failed to solve: mcr.microsoft.com/windows/servercore:ltsc2022: failed to resolve source metadat
a for mcr.microsoft.com/windows/servercore:ltsc2022: no match for platform in manifest: not found
```
åŸå› ä¸æ˜¯é•œåƒåœ°å€ä¸å­˜åœ¨ï¼Œè€Œæ˜¯å› ä¸ºæˆ‘å½“å‰çš„ Docker Desktop æ­£è¿è¡Œåœ¨â€œLinux å®¹å™¨æ¨¡å¼â€ä¸‹ï¼Œè€Œå®ƒéœ€è¦åˆ‡æ¢åˆ°â€œWindows å®¹å™¨æ¨¡å¼â€æ‰èƒ½æ‹‰å–å¹¶æ„å»º Windows é•œåƒï¼Œè€Œæ“ä½œæ–¹æ³•æ˜¯å³é”®å¿«æ·æ çš„Dockerå›¾æ ‡ï¼Œé€‰æ‹©â€œSwitch to Windows containers...â€[^switchcontainers]ã€‚ä½†æ˜¯ï¼Œå½“ç„¶ï¼Œæˆ‘æ²¡æœ‰çœ‹åˆ°è¿™ä¸ªå›¾æ ‡ï¼ŒåŸå› ä¸æ¸…æ¥šï¼Œä½†æ˜¯è§£å†³æ–¹æ³•æ˜¯é‡è£…ï¼Œå¹¶ä¸”åœ¨é‡è£…ç¬¬ä¸€æ­¥å‹¾é€‰ä¸Šå¼€å¯Windowså®¹å™¨å³å¯ã€‚[^windowscontainers]<br><br>
è¿™äº›æ”¹å®Œä¹‹åï¼Œæˆ‘è¿˜é‡åˆ°ä¸€ä¸ªé—®é¢˜
```shell
Sending build context to Docker daemon  3.072kB
Step 1/4 : FROM mcr.microsoft.com/windows/servercore:ltsc2022
ltsc2022: Pulling from windows/servercore
no matching manifest for windows(10.0.19045)/amd64 in the manifest list entries
```
è¿™ä¸ªè¡¨ç¤ºæˆ‘çš„ç³»ç»Ÿç‰ˆæœ¬å¤ªè€äº†ï¼Œ2022æ²¡æœ‰æˆ‘è¿™ä¸ªç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œè§£å†³åŠæ³•æ˜¯æ¢ä¸€ä¸ªç‰ˆæœ¬å³å¯ï¼Œè¿™é‡Œæˆ‘æ¢æˆäº†2019çš„ç‰ˆæœ¬ã€‚ä¹Ÿå°±æ˜¯æ”¹ä¸€ä¸‹FROMåé¢çš„é•œåƒçš„ç‰ˆæœ¬å·ï¼Œåœ¨æ­¤ä¸å†èµ˜è¿°ã€‚<br><br>
ä¸‹è½½é•œåƒè¿‡ç¨‹ä¸­ä¼šé‡åˆ°ç½‘ç»œé—®é¢˜ï¼Œæˆ‘å‘ç°ç›´æ¥ä½¿ç”¨ä¸Šé¢çš„Dockerfileæ„å»ºä¸ä¼šç»è¿‡é•œåƒç«™ä¸‹è½½ï¼Œæ‰€ä»¥å»ºè®®å…ˆé€šè¿‡é•œåƒç«™æ‹‰å–`mcr.microsoft.com/windows/servercore:ltsc2019`åˆ°æœ¬åœ°ï¼Œç„¶åå†æ„å»ºDockerfileã€‚
## åˆ›å»ºä¸“ç”¨äºToolchainçš„é•œåƒ
### å®‰è£…OpenSSH
æœ¬æ¥Windowsæ˜¯å¸¦æœ‰OpenSSHæ”¯æŒçš„ï¼Œå¯æ˜¯æŒ‰ç…§ç½‘ä¸Šçš„å„ç§åœ¨ä¸€èˆ¬ç”µè„‘ä¸Šå®‰è£…çš„æµç¨‹éƒ½å®‰è£…å¤±è´¥ï¼ŒåŸå› ä¹Ÿä¸€ç›´æä¸æ˜ç™½ï¼Œå‘½ä»¤çªç„¶ç»“æŸï¼Œå°±æŠ¥ä¸€ä¸ªé”™ï¼Œä¹Ÿæ²¡æœ‰æ—¥å¿—ç”Ÿæˆï¼Œè¿›å…¥å®¹å™¨æŸ¥çœ‹ä¹Ÿè¢«å‘ŠçŸ¥ä¸å¯è¡Œï¼ŒæŒ‚è½½å·ä¹Ÿæ²¡æ³•è®¾ç½®ï¼ˆä¸çŸ¥ä¸ºä½•ï¼Œä½†æ˜¯å°±æ˜¯è¢«æ‹’ç»äº†ï¼‰ï¼Œä¸€ç›´æ€€ç–‘æ˜¯æƒé™é—®é¢˜ï¼Œå¯æ˜¯æœ€åæ²¡æœ‰è°ƒæ•´æƒé™ï¼Œçº¯è«åå…¶å¦™åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä»OpenSSHå®‰è£…åŒ…é‡Œä»æ–°å®‰è£…OpenSSHï¼ˆä½†æ˜¯åŒæ—¶Windowsæ”¯æŒçš„OpenSSHä¹Ÿè¦å®‰è£…ï¼‰ï¼Œä¸‹é¢å°±è¯´ä¸€ä¸‹æˆ‘æ€ä¹ˆå®‰è£…çš„å§ï¼Œä¸è¿‡è‡³äºæˆ‘å®‰è£…æˆåŠŸçš„åŸå› ï¼Œæˆ‘ä¹Ÿä¸æ¸…æ¥šã€‚ï¼ˆä¸æ˜¯æœ€ç»ˆDockerfileï¼‰
```dockerfile
# escape=`

# =====================================================================
# STAGE 1: å®‰è£… .NET Framework 4.8 è¿™ä¸ªå‰ç½®ä¾èµ–
# è¿™ä¸ªé˜¶æ®µçš„ç›®æ ‡åªæœ‰ä¸€ä¸ªï¼šåˆ›å»ºä¸€ä¸ªå®‰è£…å¥½äº† .NET 4.8 çš„â€œä¸­é—´é•œåƒâ€
# =====================================================================
FROM msvc:latest AS dotnet-installer

# å£°æ˜é»˜è®¤ shell
SHELL ["cmd", "/S", "/C"]

# ä¸‹è½½å¹¶é™é»˜å®‰è£… .NET 4.8ï¼Œç„¶åç­‰å¾…å®ƒå®Œæˆã€‚
# /q ä»£è¡¨é™é»˜å®‰è£…ï¼Œ/norestart è¡¨ç¤ºå®‰è£…åä¸ä¸»åŠ¨è§¦å‘é‡å¯ã€‚
# start /w å‘½ä»¤ä¼šç¡®ä¿æˆ‘ä»¬ç­‰å¾…å®‰è£…ç¨‹åºå®Œå…¨é€€å‡ºã€‚
RUN curl -SL --output dotnet-installer.exe https://download.visualstudio.microsoft.com/download/pr/2d6bb6b2-226a-4baa-bdec-798822606ff1/8494001c276a4b96804cde7829c04d7f/ndp48-x86-x64-allos-enu.exe `
    && start /w dotnet-installer.exe /q /norestart `
    && del dotnet-installer.exe

# =====================================================================
# STAGE 2: åœ¨å·²ç»è£…å¥½ .NET çš„â€œæ–°â€åŸºç¡€ä¸Šï¼Œæ„å»ºæœ€ç»ˆçš„ CLion é•œåƒ
# =====================================================================
# è¿™é‡Œçš„ FROM dotnet-installer æ„å‘³ç€æˆ‘ä»¬ä»ä¸Šä¸€ä¸ªé˜¶æ®µçš„ç»“æœå¼€å§‹æ„å»º
FROM dotnet-installer

SHELL ["powershell", "-Command", "Set-ExecutionPolicy RemoteSigned -Scope Process -Force;"]

# 1. å®‰è£… OpenSSH
## å¤åˆ¶æˆ‘ä¸‹å¥½çš„OpenSSHå®‰è£…åŒ…åˆ°å®¹å™¨ï¼Œä¹Ÿå¯ä»¥urlä¸‹è½½ï¼Œä½†æ˜¯é‚£æ ·å®¹å™¨è¿ä¸ä¸Šgithubï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©æ‰‹åŠ¨ä¸‹è½½ï¼Œé™„urlä¸‹è½½å‘½ä»¤ï¼š
## Invoke-WebRequest -Uri https://github.com/PowerShell/Win32-OpenSSH/releases/download/v9.5.0.0p1-Beta/OpenSSH-Win64.zip -OutFile C:\openssh.zip
COPY openssh.zip C:\openssh.zip

## å®‰è£…Windwosæ”¯æŒçš„OpenSSHï¼ˆä¸»è¦æ˜¯ç¬¬ä¸‰è¡Œï¼Œå…¶ä»–è¡Œä¸åŠ ä¼šæŠ¥é”™ï¼Œè²Œä¼¼æ˜¯å¯åŠ¨ä»€ä¹ˆæœåŠ¡ç”¨çš„ï¼‰
RUN Set-Service -Name wuauserv -StartupType Manual; `
    Start-Service -Name wuauserv; `
    Add-WindowsCapability -Online -Name OpenSSH.Server~~~~0.0.1.0; `
    Stop-Service -Name wuauserv

RUN `
    $ErrorActionPreference = 'Stop'; `
    $ProgressPreference = 'SilentlyContinue'; `
    Expand-Archive -Path C:\openssh.zip -DestinationPath C:\openssh-temp; `
    & C:\openssh-temp\OpenSSH-Win64\install-sshd.ps1 -Confirm:$false; `
    & C:\openssh-temp\OpenSSH-Win64\FixHostFilePermissions.ps1 -Confirm:$false; `
    & C:\openssh-temp\OpenSSH-Win64\FixUserFilePermissions.ps1 -Confirm:$false
    
# åˆ é™¤å®‰è£…åŒ…
RUN Remove-Item -Path C:\openssh.zip -Force

RUN echo '@call "C:\Program Files (x86)\Microsoft Visual Studio\2022\BuildTools\Common7\Tools\VsDevCmd.bat"' | Set-Content -Path C:\msvc-shell.cmd
RUN Set-ItemProperty -Path 'HKLM:\SOFTWARE\OpenSSH' -Name DefaultShell -Value 'C:\msvc-shell.cmd' -Force

# é…ç½®OpenSSHè‡ªåŠ¨å¯åŠ¨ï¼ˆæˆ‘ä¸çŸ¥é“æœ‰æ²¡æœ‰ç”¨ï¼Œåæ­£æˆ‘è¿˜æ˜¯åé¢EntryPointå¯åŠ¨çš„ï¼‰
RUN Set-Service -Name sshd -StartupType 'Automatic'

# ç”Ÿæˆå¯†é’¥
RUN ssh-keygen.exe -A

# 2. å®‰è£… Chocolatey å’Œ CMake
RUN [System.Net.ServicePointManager]::SecurityProtocol = 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1')); `
    choco install -y cmake --installargs 'ADD_CMAKE_TO_PATH=System'

SHELL ["cmd", "/S", "/C"]

# ä¸ºCLionåˆ›å»ºå¸æˆ· msvc-clion å¹¶é…ç½®å®ƒçš„é»˜è®¤ shell ä¸º cmd
RUN net user msvc-clion "Clion602" /add `
    && net localgroup "Remote Desktop Users" msvc-clion /add

COPY start.cmd C:\start.cmd

# æš´éœ²ç«¯å£ï¼Œè®¾ç½®å¯åŠ¨å‘½ä»¤
EXPOSE 22

ENTRYPOINT ["C:\\start.cmd"]
```
è€Œ`start.cmd`çš„å†…å®¹å¦‚ä¸‹ï¼š
```shell
@echo off
echo Starting SSHD service...
powershell C:\openssh-temp\OpenSSH-Win64\install-sshd.ps1
powershell Start-Service sshd
:: æ£€æŸ¥ sshd æœåŠ¡æ˜¯å¦çœŸçš„å¯åŠ¨æˆåŠŸ
IF %ERRORLEVEL% NEQ 0 (
  echo.
  echo #######################################################
  echo #  ERROR: Failed to start the SSHD service.           #
  echo #  To exit, run: docker stop <container_name>         #
  echo #######################################################
  echo.
  echo ======================== SSHD.LOG OUTPUT START =======================
  type C:\ProgramData\ssh\logs\sshd.log || echo [Log file does not exist or is empty]
  echo ========================= SSHD.LOG OUTPUT END ========================

  echo exit /b %ERRORLEVEL%
)else (
  echo.
  echo #######################################################
  echo #  SSHD Service Started Successfully.                 #
  echo #  Container is running and ready for connections.    #
  echo #  To exit, run: docker stop <container_name>         #
  echo #######################################################
  echo.
)
:: ä½¿ç”¨ PowerShell çš„æ— é™å¾ªç¯æ¥å¯é åœ°ä¿æŒå®¹å™¨å‰å°è¿è¡Œ
powershell.exe -NoProfile -Command "& {while($true){Start-Sleep -Seconds 3600}}"
```
é‡‡å–çš„æ˜¯å¤šæ­¥éª¤å®‰è£…çš„æ–¹å¼ï¼Œå› ä¸º`.NET 4.8`çš„å®‰è£…éœ€è¦é‡å¯ç³»ç»Ÿï¼Œè€Œå•æ­¥éª¤æ˜¯ä¸å¯èƒ½å®Œæˆçš„ï¼Œæ‰€ä»¥é‡‡å–å¤šæ­¥éª¤ï¼›ä¸‹è½½Chocolateyæ˜¯å› ä¸ºGeminiè¯´å®ƒæ˜¯Windowsçš„ä¸€ä¸ªåŒ…ç®¡ç†å™¨ï¼ˆæ¢¦å¯ä»¥æ±‚çš„ï¼‰ï¼Œç”¨æ¥ä¸‹è½½CMakeã€‚<br><br>
ä¸‹é¢å†é™„æˆ‘ä¸ºäº†è§£å†³å‰é¢OpenSSHæ²¡æ³•å¯åŠ¨çš„é—®é¢˜å‚è€ƒè¿‡çš„å…¨éƒ¨èµ„æ–™ï¼ˆå¼„äº†æˆ‘ä¸€å¤©ğŸ˜­ï¼‰[^ssh]
### é›†æˆåˆ°CLion
æ­£å¦‚æˆ‘åœ¨æ–‡ç« å¼€å¤´è¯´çš„é‚£æ ·ï¼Œåœ¨è´¹åŠ›æ£é¼“äº†ä¸¤å¤©ä¹‹åï¼Œåˆ°è¿™é‡Œæˆ‘æ‰å‘ç°ï¼ŒCLionæ ¹æœ¬æ²¡æœ‰æ”¯æŒWindowsæ¶æ„çš„Dockerå®¹å™¨ä½œç¼–è¯‘ç¯å¢ƒï¼Œä¹Ÿä¸æ”¯æŒè¿œç¨‹æ˜¯Windowsçš„è¿œç¨‹å¼€å‘ï¼Œç”šè‡³è¿˜ä¸æ”¯æŒå°†Windowsç³»ç»Ÿçš„Dockerå®¹å™¨ä½œä¸ºå¼€å‘å®¹å™¨ã€‚æ‰€ä»¥æˆ‘åˆå»çœ‹Visual Studioï¼Œå¿ƒæƒ³å¾®è½¯è‡ªå·±çš„è½¯ä»¶å’Œç³»ç»Ÿï¼Œæ²¡é“ç†ä¸æ”¯æŒå§ï¼Œç»“æœï¼Œè¿˜çœŸä¸æ”¯æŒğŸ˜¡ã€‚åŒæ ·åœ°ï¼ŒVSCodeä¹Ÿä¸æ”¯æŒï¼Œæ‰€ä»¥æˆ‘åªèƒ½é€‰æ‹©é€€ä¸€æ­¥ï¼Œå¹³å¸¸åœ¨æˆ‘çš„ç”µè„‘ä¸Šæµ‹è¯•ä»£ç ï¼Œåªæ˜¯ä¸å®šæ—¶åœ°ç”¨Dockeræµ‹è¯•ä¸€ä¸‹èƒ½è·‘ï¼Œå¹¶ä¸”ç”¨ä¸€ä¸ªæ‰¹å¤„ç†è„šæœ¬åŠè‡ªåŠ¨è¿™ä»¶äº‹ã€‚
## åœ¨Dockerä¸­ç¼–è¯‘å’Œæµ‹è¯•ä»£ç 
### åŠè‡ªåŠ¨è„šæœ¬
é¦–å…ˆï¼Œå› ä¸ºHyper-Vï¼Œ`docker cp`å‘½ä»¤æ˜¯æ²¡æœ‰åŠæ³•ä½¿ç”¨çš„ï¼Œæˆ‘ä»¬åªèƒ½é‡‡ç”¨æŒ‚è½½å·çš„æ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦æŒ‚è½½æºä»£ç ç›®å½•å’ŒVcpkgç›®å½•ï¼Œä¸ç„¶ç¨‹åºæ— æ³•æ­£å¸¸åœ°è¿›è¡Œç¼–è¯‘ã€‚é¦–å…ˆï¼Œæˆ‘å…ˆè´´å‡ºæˆ‘ç”¨æ¥åŠè‡ªåŠ¨è¿›è¡Œæµ‹è¯•çš„ä»£ç 
```shell
@echo off
set CONTAINER_NAME=BiliBili_Reranger_Test_Container
set CONTAINER_SOURCE_DIR=C:/biliBili_reranger
set LOCAL_BUILD_DIR=..\\build\\DockerTest
set VS_DEV_CMD="C:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\\Common7\\Tools\\VsDevCmd.bat"
set VCPKG="D:/Microsoft Visual Studio/Include/vcpkg"
set VCPKG_IN_DOCKER="C:/vcpkg"
set VCPKG_TOOLCHAIN_FILE=C:/vcpkg/scripts/buildsystems/vcpkg.cmake
chcp 65001 > nul

echo.
echo =================================================================
echo [PHASE 1/3] æ‰§è¡Œï¼šå®¹å™¨åˆ›å»ºåŠå‡†å¤‡å·¥ä½œ
echo =================================================================
docker stop %CONTAINER_NAME%
docker rm %CONTAINER_NAME%
rmdir /s %LOCAL_BUILD_DIR% /Y
mkdir %LOCAL_BUILD_DIR%
mkdir %LOCAL_BUILD_DIR%\\src
xcopy ..\\src %LOCAL_BUILD_DIR%\\src /E/Y
mkdir %LOCAL_BUILD_DIR%\\plugins
xcopy ..\\plugins %LOCAL_BUILD_DIR%\\plugins /E/Y
copy ..\\ %LOCAL_BUILD_DIR%
docker run -d --env-file env.list --name %CONTAINER_NAME% -v %VCPKG%:%VCPKG_IN_DOCKER% -v %LOCAL_BUILD_DIR%:%CONTAINER_SOURCE_DIR% -it msvc_clion

echo.
echo =================================================================
echo [PHASE 2/3] æ‰§è¡Œï¼šå‘½ä»¤å®¹å™¨è¿›è¡Œç¼–è¯‘å’Œè¿è¡Œ...
echo =================================================================
rem åœ¨å®¹å™¨å†…æ‰§è¡Œæ„å»ºå’Œè¿è¡ŒæŒ‡ä»¤
docker exec %CONTAINER_NAME% cmd /c "call %VS_DEV_CMD% && cd %CONTAINER_SOURCE_DIR% && cmake -B build -DCMAKE_TOOLCHAIN_FILE=%VCPKG_TOOLCHAIN_FILE% && cmake --build build --config Debug && build\Debug\BiliBili_Reranger.exe"

rem æ£€æŸ¥ä¸Šä¸€æ­¥çš„æ‰§è¡Œæ˜¯å¦æˆåŠŸ
IF %errorlevel% neq 0 (
    echo.
    echo [ERROR] åœ¨å®¹å™¨å†…æ‰§è¡Œæ—¶å‘ç”Ÿé”™è¯¯ï¼è¯·æ£€æŸ¥ä¸Šé¢çš„æ—¥å¿—ã€‚
    pause
)

docker stop %CONTAINER_NAME%
docker rm %CONTAINER_NAME%

echo.
echo =================================================================
echo [PHASE 3/3] æµ‹è¯•æˆåŠŸå®Œæˆï¼
echo =================================================================
echo ä½ å¯ä»¥åœ¨æœ¬åœ°çš„ '%LOCAL_BUILD_DIR%' æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°æ‰€æœ‰äº§ç‰©ã€‚
```
>ä¸è¿‡è¿™ä¸ªæ—¶å€™æˆ‘çš„é•œåƒçš„Dockerfileä¹Ÿæœ‰å˜åŒ–ï¼Œå…·ä½“[åæ–‡](#ä¿®æ”¹dockerfile)ä¼šè®²
{: .prompt-info }
 
é¦–å…ˆæ˜¯æ‰§è¡Œ`docker run -d --env-file env.list --name %CONTAINER_NAME% -v %VCPKG%:%VCPKG_IN_DOCKER% -v %LOCAL_BUILD_DIR%:%CONTAINER_SOURCE_DIR% -it msvc_clion`åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œå‚æ•°env.listæ˜¯ç¯å¢ƒå˜é‡çš„é…ç½®ï¼Œä¸¤ä¸ªæŒ‚è½½å·åˆ†åˆ«æ˜¯VCPKGå’Œæºä»£ç çš„ç›®å½•ã€‚<br><br>
ç„¶åå°±æ˜¯`docker exec %CONTAINER_NAME% cmd /c "call %VS_DEV_CMD% && cd %CONTAINER_SOURCE_DIR% && cmake -B build -DCMAKE_TOOLCHAIN_FILE=%VCPKG_TOOLCHAIN_FILE% && cmake --build build --config Debug && build\Debug\BiliBili_Reranger.exe"`åœ¨å®¹å™¨é‡Œé¦–å…ˆæ‰§è¡Œ`C:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\\Common7\\Tools\\VsDevCmd.bat`çš„è„šæœ¬ï¼ˆå¯¹åº”äºå®˜æ–¹æ•™ç¨‹[^msvc]çš„`EntryPoint`ï¼Œä¸»è¦æ˜¯é…ç½®ä¸€äº›å…³äºVSçš„ä¸´æ—¶ç¯å¢ƒå˜é‡å’Œæ‰“å¼€ä¸€ä¸ªä¸“é—¨çš„cmdè¿è¡Œç¯å¢ƒï¼‰ï¼Œé…ç½®å¥½ç¯å¢ƒä¹‹åï¼Œè¿›è¡Œç¼–è¯‘`cmake -B build -DCMAKE_TOOLCHAIN_FILE=%VCPKG_TOOLCHAIN_FILE% && cmake --build build --config Debug`ï¼Œå…¶ä¸­`-DCMAKE_TOOLCHAIN_FILE=%VCPKG_TOOLCHAIN_FILE%`ç”¨äºæ˜ç¡®æŒ‡å®šä½¿ç”¨Vcpkgå·¥å…·é“¾ï¼Œä¹Ÿå°±æ˜¯å»Vcpkgé‡Œå¯»æ‰¾ä¾èµ–é¡¹ã€‚æœ€åè¿è¡Œç¼–è¯‘å‡ºæ¥çš„ç¨‹åºã€‚<br><br>
ç¨‹åºè¿è¡Œå®Œä¹‹åæ£€æŸ¥æœ‰æ²¡æœ‰æŠ¥é”™ï¼Œæœ‰æŠ¥é”™å°±æš‚åœç­‰å¾…æˆ‘æ¥å¤„ç†ï¼Œæ²¡æœ‰çš„è¯å°±ç›´æ¥åˆ é™¤å®¹å™¨ï¼ˆåæ­£æ•°æ®åœ¨æŒ‚è½½å·é‡Œï¼Œæ˜¯æŒä¹…åŒ–ä¿å­˜çš„ï¼‰ã€‚
### ä¿®æ”¹Dockerfile
æ­£å¦‚å‰é¢æ‰€è¯´ï¼Œå¾®è½¯å®˜æ–¹çš„MSVCå®‰è£…æ–¹æ³•çš„ä»£ç éœ€è¦æ›´æ”¹ï¼Œå¦‚æœä¸æ›´æ”¹ï¼Œæˆ‘ä»¬å®‰è£…CMakeç„¶åå†ç¼–è¯‘ç¨‹åºï¼Œä¼šæŠ¥é”™è¯´ï¼šæ‰¾ä¸åˆ°nmakeã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå®é™…ä¸Šæ˜¯VSç›¸å…³çš„å·¥å…·é“¾å¹¶æ²¡æœ‰å®Œå…¨è¿›è¡Œå®‰è£…ï¼Œå°¤å…¶æ˜¯VSå¯¹CMakeæ”¯æŒç›¸å…³çš„å·¥å…·å¹¶æ²¡æœ‰å®‰è£…ï¼Œæ‰€ä»¥ä½¿ç”¨CMakeç¼–è¯‘ç¨‹åºæ—¶ï¼ŒCMakeå®Œå…¨æ‰¾ä¸åˆ°VSç›¸å…³çš„å·¥å…·é“¾ï¼ŒåŒ…æ‹¬MSVCç­‰ç­‰çš„éƒ½æ‰¾ä¸åˆ°ï¼Œä¸ºæ­¤æˆ‘ä»¬å…¶å®åªéœ€è¦å¢åŠ ä¸€ç‚¹ç‚¹ä»£ç ï¼Œæ˜ç¡®å‘Šè¯‰VSè¦å®‰è£…CMakeç›¸å…³çš„å·¥å…·å³å¯ï¼Œä¹Ÿå°±æ˜¯å¢åŠ `--add Microsoft.VisualStudio.Workload.VCTools --add Microsoft.VisualStudio.Component.VC.Tools.x86.x64 --add Microsoft.VisualStudio.Component.Windows11SDK.22621 `å®‰è£…ç›¸å…³å·¥å…·å³å¯ã€‚<br><br>
æ­¤å¤–ï¼Œæˆ‘è¿˜ä¿®æ”¹äº†æˆ‘çš„ä¸¤ä¸ªé•œåƒçš„å®‰è£…é¡ºåºï¼Œå°†CMakeæå‰åˆ°æˆ‘çš„ç¬¬ä¸€ä¸ªé•œåƒå®‰è£…ï¼Œç„¶ååœ¨ä¸“é—¨ç»™CLionç”¨çš„é•œåƒé‡Œ ~~ï¼ˆåŸæœ¬çš„è®¡åˆ’ï¼Œè™½ç„¶åé¢ä¸è¡Œï¼‰~~ å†å®‰è£…å…¶ä»–çš„ä¸€äº›ä¸œè¥¿ï¼Œæ¯”å¦‚SSHç­‰ï¼ˆè™½ç„¶ç°åœ¨SSHä¹Ÿæ²¡ç”¨äº†ï¼‰ã€‚æœ€ç»ˆæˆ‘çš„ç¬¬ä¸€ä¸ªé•œåƒmsvcçš„Dockerfileå¦‚ä¸‹
```dockerfile
# escape=`

# Use the latest Windows Server Core 2019 image.
FROM mcr.microsoft.com/windows/servercore:ltsc2019 AS dotnet-installer

# Restore the default Windows shell for correct batch processing.
SHELL ["cmd", "/S", "/C"]

RUN `
    # Download the Build Tools bootstrapper.
    curl -SL --output vs_buildtools.exe https://aka.ms/vs/17/release/vs_buildtools.exe `
    `
    # Install Build Tools with the Microsoft.VisualStudio.Workload.AzureBuildTools workload, excluding workloads and components with known issues.
    && (start /w vs_buildtools.exe --quiet --wait --norestart --nocache `
        --installPath "%ProgramFiles(x86)%\Microsoft Visual Studio\2022\BuildTools" `
        --add Microsoft.VisualStudio.Workload.AzureBuildTools `
        --add Microsoft.VisualStudio.Workload.VCTools `
        --add Microsoft.VisualStudio.Component.VC.Tools.x86.x64 `
        --add Microsoft.VisualStudio.Component.Windows11SDK.22621 `
        --remove Microsoft.VisualStudio.Component.Windows10SDK.10240 `
        --remove Microsoft.VisualStudio.Component.Windows10SDK.10586 `
        --remove Microsoft.VisualStudio.Component.Windows10SDK.14393 `
        --remove Microsoft.VisualStudio.Component.Windows81SDK `
        || IF "%ERRORLEVEL%"=="3010" EXIT 0) `
    `
    # Cleanup
    && del /q vs_buildtools.exe

# ä¸‹è½½å¹¶é™é»˜å®‰è£… .NET 4.8ï¼Œç„¶åç­‰å¾…å®ƒå®Œæˆã€‚
# /q ä»£è¡¨é™é»˜å®‰è£…ï¼Œ/norestart è¡¨ç¤ºå®‰è£…åä¸ä¸»åŠ¨è§¦å‘é‡å¯ã€‚
# start /w å‘½ä»¤ä¼šç¡®ä¿æˆ‘ä»¬ç­‰å¾…å®‰è£…ç¨‹åºå®Œå…¨é€€å‡ºã€‚
RUN curl -SL --output dotnet-installer.exe https://download.visualstudio.microsoft.com/download/pr/2d6bb6b2-226a-4baa-bdec-798822606ff1/8494001c276a4b96804cde7829c04d7f/ndp48-x86-x64-allos-enu.exe `
    && start /w dotnet-installer.exe /q /norestart `
    && del dotnet-installer.exe

# =====================================================================
# STAGE 2: åœ¨å·²ç»è£…å¥½ .NET çš„â€œæ–°â€åŸºç¡€ä¸Šï¼Œæ„å»ºæœ€ç»ˆçš„ CLion é•œåƒ
# =====================================================================
# è¿™é‡Œçš„ FROM dotnet-installer æ„å‘³ç€æˆ‘ä»¬ä»ä¸Šä¸€ä¸ªé˜¶æ®µçš„ç»“æœå¼€å§‹æ„å»º
FROM dotnet-installer

SHELL ["powershell", "-Command", "Set-ExecutionPolicy RemoteSigned -Scope Process -Force;"]
# å®‰è£… Chocolatey å’Œ CMake
RUN [System.Net.ServicePointManager]::SecurityProtocol = 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1')); `
    choco install -y cmake --installargs 'ADD_CMAKE_TO_PATH=System'

SHELL ["cmd", "/S", "/C"]

# Define the entry point for the docker container.
# This entry point starts the developer command prompt and launches the PowerShell shell.
ENTRYPOINT ["C:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\\Common7\\Tools\\VsDevCmd.bat", "&&", "powershell.exe", "-NoLogo", "-ExecutionPolicy", "Bypass"]
```
ç¬¬äºŒä¸ªé•œåƒmsvc_clionçš„Dockerfileå¦‚ä¸‹
```dockerfile
# escape=`

# =====================================================================
# STAGE 1: å®‰è£… .NET Framework 4.8 è¿™ä¸ªå‰ç½®ä¾èµ–
# è¿™ä¸ªé˜¶æ®µçš„ç›®æ ‡åªæœ‰ä¸€ä¸ªï¼šåˆ›å»ºä¸€ä¸ªå®‰è£…å¥½äº† .NET 4.8 çš„â€œä¸­é—´é•œåƒâ€
# =====================================================================
FROM msvc:latestd

SHELL ["powershell", "-Command", "Set-ExecutionPolicy RemoteSigned -Scope Process -Force;"]

# 1. å®‰è£… OpenSSH
## å¤åˆ¶æˆ‘ä¸‹å¥½çš„OpenSSHå®‰è£…åŒ…åˆ°å®¹å™¨ï¼Œä¹Ÿå¯ä»¥urlä¸‹è½½ï¼Œä½†æ˜¯é‚£æ ·å®¹å™¨è¿ä¸ä¸Šgithubï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©æ‰‹åŠ¨ä¸‹è½½ï¼Œé™„urlä¸‹è½½å‘½ä»¤ï¼š
## Invoke-WebRequest -Uri https://github.com/PowerShell/Win32-OpenSSH/releases/download/v9.5.0.0p1-Beta/OpenSSH-Win64.zip -OutFile C:\openssh.zip
COPY openssh.zip C:\openssh.zip

## å®‰è£…Windwosæ”¯æŒçš„OpenSSHï¼ˆä¸»è¦æ˜¯ç¬¬ä¸‰è¡Œï¼Œå…¶ä»–è¡Œä¸åŠ ä¼šæŠ¥é”™ï¼Œè²Œä¼¼æ˜¯å¯åŠ¨ä»€ä¹ˆæœåŠ¡ç”¨çš„ï¼‰
RUN Set-Service -Name wuauserv -StartupType Manual; `
    Start-Service -Name wuauserv; `
    Add-WindowsCapability -Online -Name OpenSSH.Server~~~~0.0.1.0; `
    Stop-Service -Name wuauserv

RUN `
    $ErrorActionPreference = 'Stop'; `
    $ProgressPreference = 'SilentlyContinue'; `
    Expand-Archive -Path C:\openssh.zip -DestinationPath C:\openssh-temp; `
    & C:\openssh-temp\OpenSSH-Win64\install-sshd.ps1 -Confirm:$false; `
    & C:\openssh-temp\OpenSSH-Win64\FixHostFilePermissions.ps1 -Confirm:$false; `
    & C:\openssh-temp\OpenSSH-Win64\FixUserFilePermissions.ps1 -Confirm:$false

# åˆ é™¤å®‰è£…åŒ…
RUN Remove-Item -Path C:\openssh.zip -Force

# é…ç½®OpenSSHè‡ªåŠ¨å¯åŠ¨ï¼ˆæˆ‘ä¸çŸ¥é“æœ‰æ²¡æœ‰ç”¨ï¼Œåæ­£æˆ‘è¿˜æ˜¯åé¢EntryPointå¯åŠ¨çš„ï¼‰
RUN Set-Service -Name sshd -StartupType 'Automatic'

# ç”Ÿæˆå¯†é’¥
RUN ssh-keygen.exe -A

# ä¸ºCLionåˆ›å»ºå¸æˆ· msvc-clion å¹¶é…ç½®å®ƒçš„é»˜è®¤ shell ä¸º cmd
#RUN echo '@call "C:\Program Files (x86)\Microsoft Visual Studio\2022\BuildTools\Common7\Tools\VsDevCmd.bat"' | Set-Content -Path C:\msvc-shell.cmd
#RUN Set-ItemProperty -Path 'HKLM:\SOFTWARE\OpenSSH' -Name DefaultShell -Value 'C:\msvc-shell.cmd' -Force

SHELL ["cmd", "/S", "/C"]
RUN net user msvc-clion "Clion602" /add `
    && net localgroup "Remote Desktop Users" msvc-clion /add


COPY start.cmd C:\start.cmd

# æš´éœ²ç«¯å£ï¼Œè®¾ç½®å¯åŠ¨å‘½ä»¤
EXPOSE 22

ENTRYPOINT ["C:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\\Common7\\Tools\\VsDevCmd.bat", "&&", "powershell.exe", "-NoLogo", "-ExecutionPolicy", "Bypass"]
ENTRYPOINT ["C:\\start.cmd"]
```
é‡Œé¢çš„`C:\\start.cmd`å¯åŠ¨è„šæœ¬å¦‚ä¸‹
```shell
@echo off
echo Starting SSHD service...
powershell C:\openssh-temp\OpenSSH-Win64\install-sshd.ps1
powershell Start-Service sshd
:: æ£€æŸ¥ sshd æœåŠ¡æ˜¯å¦çœŸçš„å¯åŠ¨æˆåŠŸ
IF %ERRORLEVEL% NEQ 0 (
  echo.
  echo #######################################################
  echo #  ERROR: Failed to start the SSHD service.           #
  echo #  To exit, run: docker stop <container_name>         #
  echo #######################################################
  echo.
  echo ======================== SSHD.LOG OUTPUT START =======================
  type C:\ProgramData\ssh\logs\sshd.log || echo [Log file does not exist or is empty]
  echo ========================= SSHD.LOG OUTPUT END ========================

  echo exit /b %ERRORLEVEL%
)else (
  echo.
  echo #######################################################
  echo #  SSHD Service Started Successfully.                 #
  echo #  Container is running and ready for connections.    #
  echo #  To exit, run: docker stop <container_name>         #
  echo #######################################################
  echo.
)
:: ä½¿ç”¨ PowerShell çš„æ— é™å¾ªç¯æ¥å¯é åœ°ä¿æŒå®¹å™¨å‰å°è¿è¡Œ
powershell.exe -NoProfile -Command "& {while($true){Start-Sleep -Seconds 3600}}"
```

[^clionsupport]: å…³äºCLionå®˜æ–¹å¯¹Dockerçš„æ”¯æŒæƒ…å†µï¼Œå¤§å®¶å¯ä»¥å‚è€ƒå¦‚ä¸‹å‡ ç¯‡é“¾æ¥ï¼Œ[å®˜æ–¹Docker Toolchainé…ç½®æ•™ç¨‹](https://www.jetbrains.com/help/clion/clion-toolchains-in-docker.html#sample-dockerfile)ï¼Œ[å®˜æ–¹å‚è€ƒDockerfile](https://github.com/JetBrains/clion-remote/blob/master/Dockerfile.cpp-env-ubuntu)ï¼Œ[å…³äºæ”¯æŒWindowsçš„è®¨è®º](https://youtrack.jetbrains.com/issue/CPP-27635/Docker-Toolchain-for-Windows-Docker-Containers-with-MS-BuildTools)
[^switchcontainers]: è¿™ä¸ªåˆ‡æ¢ä¹‹åï¼Œä½ ä¼šå‘ç°ä¹‹å‰ä¸‹è½½çš„Linuxè¿è¡Œçš„é•œåƒéƒ½æ¶ˆå¤±äº†ï¼ŒåŒç†ï¼Œå®Œæˆæœ¬æ–‡çš„æ“ä½œå†åˆ‡å›Linuxï¼ŒWindowsçš„é•œåƒä¹Ÿçœ‹ä¸åˆ°äº†ï¼Œè¿™å®é™…ä¸Šå°±æ˜¯åˆ‡æ¢è¿è¡Œç¯å¢ƒå¸¦æ¥çš„ç¼ºç‚¹ï¼Œæ²¡ä»€ä¹ˆå¥½åŠæ³•è§£å†³ã€‚ä¸è¿‡æˆ‘åˆšåˆšå¼€å§‹ä½¿ç”¨Dockerï¼Œæ‰€ä»¥é—®é¢˜å¯¹æˆ‘è¿˜ä¸æ˜¯å¾ˆå¤§ã€‚å¦å¤–å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåˆ‡æ¢ä¸ºWindowsæ¨¡å¼ä¹‹åï¼Œé•œåƒå’Œå®¹å™¨å‚¨å­˜çš„ç›®å½•ä¸èƒ½æ›´æ”¹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé•œåƒä»€ä¹ˆçš„åªèƒ½å­˜åœ¨Cç›˜ï¼Œè¿™å¾ˆå®¹æ˜“å¯¼è‡´Cç›˜æº¢å‡ºï¼ˆå› æ­¤æˆ‘é•œåƒæ„å»ºå¤±è´¥å¥½å¤šæ¬¡æˆ‘æ‰å‘ç°ï¼‰ã€‚åªèƒ½è¯´ï¼Œæœç„¶Dockeræ›´é€‚åˆLinuxç³»ç»Ÿã€‚
[^windowscontainers]: æœç´¢è§£å†³åŠæ³•çš„è¿‡ç¨‹ä¸­ï¼Œé’ˆå¯¹è®¸å¤šç±»ä¼¼æƒ…å†µï¼Œæˆ‘çœ‹åˆ°è®¸å¤šå¯èƒ½æœ‰ç”¨çš„æ–‡ç« ï¼Œç°ç½—åˆ—å¦‚ä¸‹ï¼š[Githubè®¨è®º](https://github.com/docker/for-win/issues/14503) [å‘½ä»¤åˆ‡æ¢](https://dev59.com/I77pa4cB1Zd3GeqPzHjN) [ç³»ç»Ÿè®¾ç½®](https://blog.csdn.net/qq_45697532/article/details/132061673) [å¦ä¸€ç§è®¾ç½®æ–¹æ³•ï¼ˆæˆ‘æ‰¾ä¸åˆ°é…ç½®æŒ‰é’®ï¼‰](https://www.oryoy.com/news/qing-song-shang-shou-yi-zhao-jiao-ni-qing-song-qie-huan-zhi-windows-rong-qi-huan-jing.html)
[^ssh]: [å¾®è½¯å®˜æ–¹å®‰è£…æ–¹æ³•](https://learn.microsoft.com/zh-cn/windows-server/administration/openssh/openssh_install_firstuse?tabs=powershell&pivots=windows-server-2019)ã€[sshå®‰è£…æ–¹æ³•](https://blog.csdn.net/qq_27327057/article/details/126882441)ã€[windowså¼€å¯ssh serveræœåŠ¡](https://zhuanlan.zhihu.com/p/2882095347)ã€[sshé“¾æ¥æ–¹æ³•](https://www.itblogcn.com/article/2266.html)ã€[Windows ä¸Šçš„ OpenSSHï¼šå®‰è£…ã€é…ç½®å’Œä½¿ç”¨æŒ‡å—](https://www.sysgeek.cn/openssh-windows/)ã€[sshæ— è¾“å‡º 1067æŠ¥é”™](https://blog.csdn.net/weixin_43483799/article/details/147130363)ã€[1067æŠ¥é”™](https://stackoverflow.com/questions/39319140/error-1067-on-start-openssh-by-net-start-opensshd-in-windows-cmd)
[^msvc]: [å®˜æ–¹æ•™ç¨‹](https://learn.microsoft.com/en-us/visualstudio/install/build-tools-container?view=vs-2022)
